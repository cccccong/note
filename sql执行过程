# sql执行过程

## 1.查询缓存

缓存命中时立刻换返回结果

- 表发生变化，这个表的缓存将失效
- 一个大小写敏感的哈希实现的，即sql要完全相同
- 返回结果前会再次鉴权

## 2.解析和预处理

权限验证

通过关键字解析sql并生成解析树

检查sql是否合法----数据表、数据列、是否存在，sql中是否有歧义（名字）

## 3.查询优化器

将解析树转化成执行计划，从执行计划中选择成本最小的一条

- 执行计划缓存：当相似的语句再次被输入服务器时，就可以直接使用已缓存的执行计划，从而跳过SQL语句生成执行计划的整个过程

## 4.查询执行引擎

调用执行引擎api执行执行计划
